<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CodeChef - Typo Wars</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 50px auto;
        padding: 20px;
        background-color: #f5f5f5;
      }

      .container {
        background: white;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      h1 {
        text-align: center;
        color: #333;
        margin-bottom: 30px;
      }

      #textInput {
        width: 100%;
        height: 300px;
        padding: 15px;
        border: 2px solid #ddd;
        border-radius: 8px;
        font-size: 16px;
        resize: vertical;
        background-color: #fff;
        color: #fff;
        outline: none;
        caret-color: #333;
      }

      #textInput:focus {
        border-color: #4caf50;
      }

      #textInput::selection {
        background-color: transparent;
      }

      #textInput::-moz-selection {
        background-color: transparent;
      }

      .button-container {
        margin-top: 20px;
        text-align: center;
      }

      #clearBtn {
        background-color: #f44336;
        color: white;
        padding: 12px 24px;
        border: none;
        border-radius: 5px;
        font-size: 16px;
        cursor: pointer;
        transition: background-color 0.3s;
      }

      #clearBtn:hover {
        background-color: #da190b;
      }

      .visible-text {
        color: #333 !important;
      }

      .instructions {
        text-align: center;
        margin-bottom: 20px;
        color: #666;
        font-style: italic;
      }

      .secret-hint {
        text-align: center;
        margin-top: 10px;
        color: #999;
        font-size: 12px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>TYPO WARS üî•</h1>
      <div class="instructions">
        Type in the box below - your text will remain invisible!
      </div>

      <textarea
        id="textInput"
        placeholder="Start typing... your text will be completely hidden!"
        spellcheck="false"
      ></textarea>

      <div class="button-container">
        <button id="clearBtn" onclick="clearText()">üóëÔ∏è Clear All</button>
      </div>

      <div class="secret-hint"></div>
    </div>

    <script>
      let isTextVisible = false;
      let secretSequence = [];
      const secretCode = ["r", "e", "v", "e", "a", "l"]; // Secret word: "reveal"
      const textInput = document.getElementById("textInput");

      // Prevent text selection completely
      textInput.addEventListener("selectstart", function (e) {
        e.preventDefault();
      });

      textInput.addEventListener("mousedown", function (e) {
        e.preventDefault();
        this.focus();
      });

      // Disable copy/paste/cut/select all
      textInput.addEventListener("keydown", function (e) {
        // Disable Ctrl+A, Ctrl+C, Ctrl+V, Ctrl+X
        if (e.ctrlKey && ["a", "c", "v", "x"].includes(e.key.toLowerCase())) {
          e.preventDefault();
          return false;
        }

        // Track secret sequence
        if (e.key.length === 1) {
          secretSequence.push(e.key.toLowerCase());

          // Keep only the last 6 characters
          if (secretSequence.length > secretCode.length) {
            secretSequence.shift();
          }

          // Check if secret code is typed
          if (
            secretSequence.length === secretCode.length &&
            secretSequence.join("") === secretCode.join("")
          ) {
            toggleText();
            secretSequence = []; // Reset sequence
            e.preventDefault(); // Don't type the last letter
          }
        }
      });

      // Disable right-click context menu
      textInput.addEventListener("contextmenu", function (e) {
        e.preventDefault();
      });

      function toggleText() {
        if (isTextVisible) {
          // Hide the text
          textInput.classList.remove("visible-text");
          isTextVisible = false;
        } else {
          // Show the text
          textInput.classList.add("visible-text");
          isTextVisible = true;
        }
      }

      function clearText() {
        if (confirm("Are you sure you want to clear all text?")) {
          textInput.value = "";
          textInput.classList.remove("visible-text");
          isTextVisible = false;
          secretSequence = [];
          textInput.focus();
        }
      }

      // Keep focus on textarea
      textInput.addEventListener("blur", function () {
        setTimeout(() => {
          if (document.activeElement !== document.getElementById("clearBtn")) {
            textInput.focus();
          }
        }, 100);
      });

      // Auto-focus on page load
      window.onload = function () {
        textInput.focus();
      };

      // Disable drag and drop
      textInput.addEventListener("dragstart", function (e) {
        e.preventDefault();
      });

      textInput.addEventListener("drop", function (e) {
        e.preventDefault();
      });
    </script>
  </body>
</html>
